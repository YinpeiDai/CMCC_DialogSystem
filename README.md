# THUEE-CMCC Dialog System 0.1
## 对话系统目前实现套餐、流量和个人信息三个领域的任务导向型对话系统，主要实现业务推荐，查询和问询功能

### 环境
* python 3.6
* TensorFlow 1.8
* jieba 0.39
* scikit-learn 0.19.2
* scipy 1.1.0
* matplotlib 2.2.3

### 使用方式

	在主目录下运行命令 python3 Agent.py --print=True/False 
	由于系统仍在调试阶段，默认print=True，会输出dialog state和DST规则细节
		
	系统运行后，输入用户名，可保存用户的对话历史和日志（例: 参考user/zhangyc）
	输入'restart'或'重来'可重置dialog state，重新开始对话
	输入'结束'或'再见'或'谢谢'可结束对话，保存对话历史
	在对话中碰到的问题，可以记录到problem.txt中，反馈给我们
		
### 系统结构
```
├─DM  			    对话管理器，实现对话状态跟踪和对话策略生成
│  ├─DST		
│  └─policy
├─data 				存放数据和预处理脚本的文件夹
│  ├─DataBase 	 	存放数据库，本体等
│  ├─DialogData 	存放对话数据
│  ├─tmp			存放中间文件，如词典、词向量等, 非自动生成的文件有前缀‘_’
│  ├─WordDict 		存放生成词典、词向量的脚本
│  └─WordSeg 		存放分词脚本
├─NLU 				处理输入数据
│  ├─DomDect 		领域检测
│  │  └─model  	
│  │      └─ckpt 	
│  ├─NER 			业务实体识别
│  ├─SentiDect 		情感检测
│  ├─SlotFilling 	识别本轮槽值对、问询槽
│  │  └─model
│  │      └─ckpt
│  └─UserAct 		用户动作检测
│      └─model
│          └─ckpt
└─NLG 				自然语言生成
```
### 使用示例  
__示例一__  
_用户_：最近有什么套餐推荐的  
_系统_：中移动近期面向北京客户推出了畅享套餐，和4G套餐。通话多的客户可选择商旅套餐。 
     流量发烧友们也可以选择畅享不限量套餐。请问您对套餐的费用，流量，通话时长有什么具体要求？  
     
_用户_：有没有100元以内的？  
_系统_：您对套餐的国内主叫通话时长有什么要求？  

_用户_：没有  
_系统_：为您推荐：18元档4G飞享套餐升级版。  

_用户_：这个套餐都有些什么  
_系统_：该套餐的套餐内容为：包含国内主叫0分钟，国内流量100MB  

_用户_：还有别的套餐吗  
_系统_：已为您找到业务：58元档88商旅套餐。  
      58元档88商旅套餐：58元/月，包含国内主叫150分钟，国内流量30MB。  
      
_用户_：要便宜点的   
_系统_：已为您找到业务：28元档4G飞享套餐升级版   
 
_用户_：这个多少流量    
_系统_：该套餐包括国内流量100MB。   

_用户_：太少了，换一个   
_系统_：为您推荐：38档和4G套餐。
        38档和4G套餐：38元/月，包含国内主叫50分钟，国内流量300MB。主叫时长超出，0.25元/分钟。   
        
_用户_：有没有流量更多的    
_系统_：为您推荐：48元档4G飞享套餐升级版。   
该套餐的月功能费为：48元。   
该套餐包括国内流量500MB。   

_用户_：办理方式是什么   
_系统_：该套餐的开通方式为：发送短信代码 KTFX48 到10086   

_用户_：如何取消套餐   
_系统_：该套餐能否变更或取消：只有全球通、神州行升级版标准卡客户可以取消套餐，取消后执行相应品牌的标准资费；其他品牌客户无法取消套餐，只能变更为其它主套餐。   
该套餐的取消方式为：发送短信代码 QXFX 到10086   

_用户_：谢谢，再见


__示例二__  
_用户_：有什么流量套餐
_系统_：中移动近期面向北京移动全品牌推出畅游包，加油包，幸福流量年包，任我用流量包等等。
请问您对价位和流量有什么要求？  

_用户_：10元以内一月2G左右的流量包    
_系统_：为您推荐：9元流量小时包。    
产品介绍：含国内流量2GB，订购后立即生效，有效期4小时。若您在闲时时段（每日23:00至次日7:00）订购，还可享受半价优惠。    

_用户_：有流量日包吗  
_系统_：为您推荐：流量日包。
流量日包介绍：即日起，通过中国移动手机营业厅、移动商城（含触屏版）可办理。24小时内有效：分为15/10元，含2GB/1GB流量。开通后立即生效，各档套餐每月最多订购30次， 流量不可共享、结转。每月最后一天19点后不能办理。   

_用户_：怎么开通    
_系统_：该套餐的开通方式为：通过营业厅、10086人工、微厅、北京移动手机营业厅等方式开通    

_用户_：那流量季包呢  
_系统_：为您推荐：流量季包。  

_用户_：有些啥？  
_系统_：产品介绍：北京移动面向客户推出“流量季包”，分为30/60/90元三档，套餐内包含210/450/1500MB国内移动数据流量（可用于2G、3G、4G网络），超出后将按您现有流量套餐资费标准执行，有效期为生效月起3个自然月内有效，当月申请，立即扣费并生效，此套餐不能取消，到期后自动失效。流量季包最多可同时订购3个。您可通过营业厅或登录门户网站办理，月末最后一天的19点后无法办理。
  
_用户_：好的，谢谢


__示例三__   
_用户_：我号码是多少  
_系统_：您正在进行个人信息查询  
话费充值：请登录网上营业厅、微厅或 APP 充值  
号码：18811369685  
请问您还需要了解其他业务吗？ 

_用户_：还剩多少流量  
_系统_：您正在进行个人信息查询  
账单查询：请登录网上营业厅、微厅或 APP 查询    
流量查询：剩余流量 11.10 GB    
请问您还需要了解其他业务吗？    

_用户_：我都订购了哪些业务     
_系统_：您正在进行个人信息查询   
已购业务：['180元档幸福流量年包', '18元4G飞享套餐升级版']    
请问您还需要了解其他业务吗？   

_用户_：不用了，谢谢   


### Contributor

Yichi Zhang  
Yinpei Dai  
Zhijian Ou  

_Due to there is a data issue, CMCC dialog data is not available._
